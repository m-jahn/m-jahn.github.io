I"Ij<p>Before we dive directly into the fun of making treemaps, one word
regarding the past, present and future of this blog. The last post I
made is around one year ago (so much for the past). Many things have
happened in this year, first and foremost that I became father for the
second time.</p>

<p>Both family life and my professional life as researcher at Science for
Life Lab in Stockholm do in fact leave only limited time for extra
activities, like this blog. This is a bit sad for me, but I see it as a
temporary issue. I’m still more than dedicated to this blog (present)
and will try to post more regularly in the future. Particularly because
so many interesting things are happening in the data sciences, and these
things have also changed the way I conduct my research and work with
data. Just to name of few, I started using
<a href="https://github.com/m-jahn/">github</a> and making my own R packages. I
want to write and publish my data analysis pipelines as R markdown
notebooks. I want to get more familiar with machine learning, and so on.
All of these developments are worth their own posts, but now I start
with: treemaps.</p>

<p>What are treemaps? Treemaps are extremely space-efficient yet easy to
grasp visualizations for data sets with two important properties: The
data can have both <em>numerical</em> and <em>categorial</em> character. The
<em>numerical part determines the <strong>map</strong> in treemap</em>, that means tiles or
cells of a 2-dimensional plane are scaled according to the input. Small
values become small cells and large values become large cells. The
<em>categorial part determines the <strong>tree</strong> in treemap</em>, that means one big
cell can in turn be parent to a set of smaller cells that are nested
within it. Well, a picutre is worth a thousand words so let’s look at an
example.</p>

<p>Based on existing functions I have compiled an R package for creation of
<strong>Voronoi and Sunburst treemaps</strong>,
<a href="https://github.com/m-jahn/SysbioTreemaps"><strong>SysbioTreemaps</strong></a>,
available on github and maybe sooner or later on CRAN. Let’s test it.</p>

<hr />

<h4 id="installing-the-package">Installing the package</h4>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># install SysbioTreemaps from github</span><span class="w">
</span><span class="n">require</span><span class="p">(</span><span class="n">devtools</span><span class="p">)</span><span class="w">
</span><span class="n">devtools</span><span class="o">::</span><span class="n">install_github</span><span class="p">(</span><span class="s2">"https://github.com/m-jahn/SysbioTreemaps"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># attach packages</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">SysbioTreemaps</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<hr />

<h4 id="a-simple-example">A simple example</h4>

<p>We can use the <code class="language-plaintext highlighter-rouge">starwars</code> data set from the <code class="language-plaintext highlighter-rouge">dplyr</code> package. It’s good
for our purpose because it contains both numeric and categorial data.
The latter are name and home world of the movie characters. The cell
size for each character is encoded by the number of films he or she
showed up in.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">dplyr</span><span class="o">::</span><span class="n">starwars</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">films</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">films</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">sapply</span><span class="p">(</span><span class="n">length</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">substr</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">20</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">homeworld</span><span class="p">))</span><span class="w">
  

</span><span class="c1"># generate voronoi treemap</span><span class="w">
</span><span class="n">tm</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">voronoiTreemap</span><span class="p">(</span><span class="w">
  </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w">
  </span><span class="n">levels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"homeworld"</span><span class="p">,</span><span class="w"> </span><span class="s2">"name"</span><span class="p">),</span><span class="w">
  </span><span class="n">cell_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"films"</span><span class="p">,</span><span class="w">
  </span><span class="n">shape</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"rounded_rect"</span><span class="p">,</span><span class="w">
  </span><span class="n">positioning</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"clustered_by_area"</span><span class="w">
</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Level 1 tesselation:  0.19 % mean error,  1.45 % max error,  100 iterations
## Level 2 tesselation:  0.64 % mean error,  0.96 % max error,  48 iterations
## Level 2 tesselation:  0.97 % mean error,  0.97 % max error,  58 iterations
## Level 2 tesselation:  0.66 % mean error,  0.99 % max error,  51 iterations
## Level 2 tesselation:  0.66 % mean error,  0.99 % max error,  44 iterations
## Level 2 tesselation:  0.98 % mean error,  0.98 % max error,  28 iterations
## Level 2 tesselation:  0.97 % mean error,  0.97 % max error,  48 iterations
## Level 2 tesselation:  0.38 % mean error,  0.87 % max error,  47 iterations
## Level 2 tesselation:  0.89 % mean error,  0.89 % max error,  39 iterations
## Level 2 tesselation:  0.44 % mean error,  0.93 % max error,  58 iterations
## Treemap successfully created
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># draw the treemap</span><span class="w">
</span><span class="n">drawTreemap</span><span class="p">(</span><span class="n">tm</span><span class="p">,</span><span class="w"> 
  </span><span class="n">label_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">2</span><span class="p">,</span><span class="w">
  </span><span class="n">label_color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">grey</span><span class="p">(</span><span class="m">0.95</span><span class="p">),</span><span class="w"> </span><span class="n">grey</span><span class="p">(</span><span class="m">0.85</span><span class="p">)),</span><span class="w">
  </span><span class="n">label_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w">
</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="/png/2019-10-08-voronoi-treemaps_files/figure-gfm/unnamed-chunk-3-1.png" alt="" /><!-- --></p>

<p>So what happened? In treemap logic, the total area of the plane was
subdivided into parental cells and the area of each of these parents
corresponds to the sum of the daughter cell’s area. All cells are
therefore either directly scaled according to the numerical variable, or
aggregated from daughter cells.</p>

<hr />

<h4 id="a-real-world-data-set">A real world data set</h4>

<p>This blog is called Europe by Numbers for a reason. I like to explore
data as much as I like to explore European countries. I have often used
<strong>Eurostat</strong> as a source for data regarding European countries, and now
there is the fantastic <a href="https://github.com/ropengov/eurostat/">eurostat package for
R</a>. We can search for keywords in
the description of databases and then download the table of choice. In
this example we search expenditures for consumer goods per EU country.
<!-- The available dataset is in purchasing power parities, that means local currency is normalized to Euro. --></p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">eurostat</span><span class="p">)</span><span class="w">

</span><span class="c1"># download data from eurostat: we can search for purchasing power parities</span><span class="w">
</span><span class="n">search_eurostat</span><span class="p">(</span><span class="s2">"Purchasing power"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">pull</span><span class="p">(</span><span class="n">title</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">substr</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">100</span><span class="p">)</span><span class="w">
</span><span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">get_eurostat</span><span class="p">(</span><span class="s2">"prc_ppp_ind"</span><span class="p">,</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"label"</span><span class="p">,</span><span class="w"> </span><span class="n">stringsAsFactors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">head</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## # A tibble: 6 x 5
##   na_item                ppp_cat               geo             time       values
##   &lt;chr&gt;                  &lt;chr&gt;                 &lt;chr&gt;           &lt;date&gt;      &lt;dbl&gt;
## 1 Nominal expenditure (… Actual individual co… Albania         2018-01-01  10831
## 2 Nominal expenditure (… Actual individual co… Austria         2018-01-01 246801
## 3 Nominal expenditure (… Actual individual co… Bosnia and Her… 2018-01-01  14643
## 4 Nominal expenditure (… Actual individual co… Belgium         2018-01-01 306521
## 5 Nominal expenditure (… Actual individual co… Bulgaria        2018-01-01  38031
## 6 Nominal expenditure (… Actual individual co… Switzerland     2018-01-01 353590
</code></pre></div></div>

<p>This data set is a time series of consumer goods expenditures from 1995
to 2018, broken down per EU country. We filter the data set for a subset
of interesting variables and countries. Particularly, we filter out
categories (<code class="language-plaintext highlighter-rouge">ppp_cat</code>) that seem to be aggregates of sub-categories, for
example ‘Total goods’ <em>et cetera</em>.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># filter for specific year and member country</span><span class="w">
</span><span class="n">df_subset</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="w">
  </span><span class="n">na_item</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"Nominal expenditure per inhabitant (in euro)"</span><span class="p">,</span><span class="w">
  </span><span class="o">!</span><span class="n">grepl</span><span class="p">(</span><span class="s2">"Total|Capital|Gross|[Ff]inal|Actual|Food and|[Cc]ons|serv"</span><span class="p">,</span><span class="w"> </span><span class="n">ppp_cat</span><span class="p">),</span><span class="w">
  </span><span class="n">time</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"2018-01-01"</span><span class="w">
</span><span class="p">)</span><span class="w">

</span><span class="c1"># abbreviate categories</span><span class="w">
</span><span class="n">df_subset</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">df_subset</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">ppp_cat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">substr</span><span class="p">(</span><span class="n">ppp_cat</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">25</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">gsub</span><span class="p">(</span><span class="s2">" "</span><span class="p">,</span><span class="w"> </span><span class="s2">"\n"</span><span class="p">,</span><span class="w"> </span><span class="n">.</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<p>Generate treemap and plot it.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># generate voronoi treemap</span><span class="w">
</span><span class="n">tm</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">voronoiTreemap</span><span class="p">(</span><span class="w">
  </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">df_subset</span><span class="p">,</span><span class="w"> </span><span class="n">geo</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Sweden"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Finland"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"Denmark"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Iceland"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Estonia"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Lithuania"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Latvia"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Norway"</span><span class="p">)),</span><span class="w">
  </span><span class="n">levels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"geo"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ppp_cat"</span><span class="p">),</span><span class="w">
  </span><span class="n">cell_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"values"</span><span class="p">,</span><span class="w">
  </span><span class="n">shape</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"rounded_rect"</span><span class="p">,</span><span class="w">
  </span><span class="n">positioning</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"clustered_by_area"</span><span class="p">,</span><span class="w">
  </span><span class="n">error_tol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.001</span><span class="p">,</span><span class="w">
  </span><span class="n">maxIteration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">200</span><span class="w">
</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Level 1 tesselation:  0.04 % mean error,  0.1 % max error,  168 iterations
## Level 2 tesselation:  0.05 % mean error,  0.22 % max error,  200 iterations
## Level 2 tesselation:  0.08 % mean error,  0.52 % max error,  200 iterations
## Level 2 tesselation:  0.09 % mean error,  0.46 % max error,  200 iterations
## Level 2 tesselation:  0.1 % mean error,  0.49 % max error,  200 iterations
## Level 2 tesselation:  0.08 % mean error,  0.32 % max error,  200 iterations
## Level 2 tesselation:  0.09 % mean error,  0.59 % max error,  200 iterations
## Level 2 tesselation:  0.13 % mean error,  0.69 % max error,  200 iterations
## Level 2 tesselation:  0.07 % mean error,  0.46 % max error,  200 iterations
## Treemap successfully created
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># draw the treemap</span><span class="w">
</span><span class="n">drawTreemap</span><span class="p">(</span><span class="n">tm</span><span class="p">,</span><span class="w"> 
  </span><span class="n">label_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">2</span><span class="p">,</span><span class="w">
  </span><span class="n">label_color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">grey</span><span class="p">(</span><span class="m">0.95</span><span class="p">),</span><span class="w"> </span><span class="n">grey</span><span class="p">(</span><span class="m">0.85</span><span class="p">)),</span><span class="w">
  </span><span class="n">label_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">),</span><span class="w">
  </span><span class="n">legend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w">
  </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Expenditure in € per capita, Northern Europe, 2018"</span><span class="w">
</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="/png/2019-10-08-voronoi-treemaps_files/figure-gfm/unnamed-chunk-7-1.png" alt="" /><!-- --></p>

<p>The same thing as it would look for Central Europe…</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># trim Germanys name</span><span class="w">
</span><span class="n">df_subset</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">df_subset</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="n">geo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gsub</span><span class="p">(</span><span class="s2">"Germany.*"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Germany"</span><span class="p">,</span><span class="w"> </span><span class="n">geo</span><span class="p">))</span><span class="w">

</span><span class="c1"># generate voronoi treemap</span><span class="w">
</span><span class="n">tm</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">voronoiTreemap</span><span class="p">(</span><span class="w">
  </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">df_subset</span><span class="p">,</span><span class="w"> </span><span class="n">geo</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="w">
      </span><span class="s2">"Germany"</span><span class="p">,</span><span class="w"> </span><span class="s2">"France"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Poland"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Czechia"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"Netherlands"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Belgium"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Austria"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Switzerland"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"Germany (until 1990 former territory of the FRG)"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"Luxembourg"</span><span class="w">
    </span><span class="p">)),</span><span class="w">
  </span><span class="n">levels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"geo"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ppp_cat"</span><span class="p">),</span><span class="w">
  </span><span class="n">cell_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"values"</span><span class="p">,</span><span class="w">
  </span><span class="n">shape</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"rounded_rect"</span><span class="p">,</span><span class="w">
  </span><span class="n">positioning</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"clustered_by_area"</span><span class="p">,</span><span class="w">
  </span><span class="n">error_tol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.001</span><span class="p">,</span><span class="w">
  </span><span class="n">maxIteration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">200</span><span class="w">
</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Level 1 tesselation:  0.04 % mean error,  0.1 % max error,  178 iterations
## Level 2 tesselation:  0.06 % mean error,  0.5 % max error,  200 iterations
## Level 2 tesselation:  0.06 % mean error,  0.46 % max error,  200 iterations
## Level 2 tesselation:  0.09 % mean error,  0.62 % max error,  200 iterations
## Level 2 tesselation:  0.1 % mean error,  0.57 % max error,  200 iterations
## Level 2 tesselation:  0.09 % mean error,  0.51 % max error,  200 iterations
## Level 2 tesselation:  0.15 % mean error,  1 % max error,  200 iterations
## Level 2 tesselation:  0.09 % mean error,  0.39 % max error,  200 iterations
## Level 2 tesselation:  0.1 % mean error,  0.47 % max error,  200 iterations
## Level 2 tesselation:  0.14 % mean error,  0.67 % max error,  200 iterations
## Treemap successfully created
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># draw the treemap</span><span class="w">
</span><span class="n">drawTreemap</span><span class="p">(</span><span class="n">tm</span><span class="p">,</span><span class="w"> 
  </span><span class="n">label_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">2</span><span class="p">,</span><span class="w">
  </span><span class="n">label_color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">grey</span><span class="p">(</span><span class="m">0.95</span><span class="p">),</span><span class="w"> </span><span class="n">grey</span><span class="p">(</span><span class="m">0.85</span><span class="p">)),</span><span class="w">
  </span><span class="n">label_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">),</span><span class="w">
  </span><span class="n">legend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w">
  </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Expenditure in € per capita, Central Europe, 2018"</span><span class="w">
</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="/png/2019-10-08-voronoi-treemaps_files/figure-gfm/unnamed-chunk-8-1.png" alt="" /><!-- --></p>
:ET